04-Dec-2025 21:49:55.443 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:49:55.443 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:50:01.804 SEVERE [http-nio-8081-exec-7] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:50:01.804 SEVERE [http-nio-8081-exec-7] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:51:46.556 SEVERE [http-nio-8081-exec-4] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:51:46.556 SEVERE [http-nio-8081-exec-4] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:51:56.662 SEVERE [http-nio-8081-exec-1] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:51:56.662 SEVERE [http-nio-8081-exec-1] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:59:43.221 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 21:59:43.221 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 22:04:23.291 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 22:04:23.291 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 22:55:41.692 SEVERE [http-nio-8081-exec-10] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 22:55:41.692 SEVERE [http-nio-8081-exec-10] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:04:53.283 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:04:53.283 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:05:01.167 SEVERE [http-nio-8081-exec-10] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:05:01.167 SEVERE [http-nio-8081-exec-10] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:05:21.518 SEVERE [http-nio-8081-exec-4] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:05:21.518 SEVERE [http-nio-8081-exec-4] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:05:31.677 SEVERE [http-nio-8081-exec-1] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:05:31.677 SEVERE [http-nio-8081-exec-1] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:08:51.723 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:08:51.723 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:08:54.440 SEVERE [http-nio-8081-exec-8] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:08:54.440 SEVERE [http-nio-8081-exec-8] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:09:09.610 SEVERE [http-nio-8081-exec-8] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:09:09.610 SEVERE [http-nio-8081-exec-8] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:09:51.680 SEVERE [http-nio-8081-exec-5] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:09:51.681 SEVERE [http-nio-8081-exec-5] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:09:55.622 SEVERE [http-nio-8081-exec-7] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:09:55.622 SEVERE [http-nio-8081-exec-7] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:12:39.595 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:553)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:520)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:332)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:12:39.595 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [183]

180:                 <p>Email: ${sessionScope.user.email}</p>
181:                 <p>Роль:
182:                     <c:choose>
183:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
184:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
185:                         <c:otherwise>Покупатель</c:otherwise>
186:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:553)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:520)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:332)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:27:44.997 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:27:44.997 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:27:56.330 SEVERE [http-nio-8081-exec-7] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:27:56.330 SEVERE [http-nio-8081-exec-7] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Произошла ошибка при обработке [/WEB-INF/jsp/user/profile.jsp] в строке [182]

179:                 <p>Email: ${sessionScope.user.email}</p>
180:                 <p>Роль:
181:                     <c:choose>
182:                         <c:when test="${sessionScope.user.role == 'ADMIN'}">Администратор</c:when>
183:                         <c:when test="${sessionScope.user.role == 'SELLER'}">Продавец</c:when>
184:                         <c:otherwise>Покупатель</c:otherwise>
185:                     </c:choose>


Stacktrace:] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:44)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:30:03.684 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:45)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:30:03.684 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Error loading profile] с первопричиной
	jakarta.el.ELException: Cannot convert [ADMIN] of type [class java.lang.String] to [class com.keystore.model.User$Role]
		at org.apache.el.lang.ELSupport.coerceToEnum(ELSupport.java:225)
		at org.apache.el.lang.ELSupport.equals(ELSupport.java:179)
		at org.apache.el.parser.AstEqual.getValue(AstEqual.java:36)
		at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:150)
		at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:666)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:548)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:515)
		at org.apache.jsp.WEB_002dINF.jsp.user.profile_jsp._jspService(profile_jsp.java:327)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:62)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:428)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:45)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:38:04.764 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet [jsp] threw exception
	org.apache.jasper.JasperException: <h3>Validation error messages from TagLibraryValidator for [c] in [/WEB-INF/jsp/user/profile.jsp]</h3><p>44: Illegal text inside "c:choose" tag: "<!-- ИС...".</p>
		at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:35)
		at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:267)
		at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:74)
		at org.apache.jasper.compiler.Validator.validateXmlView(Validator.java:1698)
		at org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1648)
		at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:205)
		at org.apache.jasper.compiler.Compiler.compile(Compiler.java:361)
		at org.apache.jasper.compiler.Compiler.compile(Compiler.java:339)
		at org.apache.jasper.compiler.Compiler.compile(Compiler.java:325)
		at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:368)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:45)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
04-Dec-2025 23:38:04.766 SEVERE [http-nio-8081-exec-6] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() для сервлета [ProfileServlet] в контексте с путем [/game-key-store] выбросил исключение [Error loading profile] с первопричиной
	org.apache.jasper.JasperException: <h3>Validation error messages from TagLibraryValidator for [c] in [/WEB-INF/jsp/user/profile.jsp]</h3><p>44: Illegal text inside "c:choose" tag: "<!-- ИС...".</p>
		at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:35)
		at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:267)
		at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:74)
		at org.apache.jasper.compiler.Validator.validateXmlView(Validator.java:1698)
		at org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1648)
		at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:205)
		at org.apache.jasper.compiler.Compiler.compile(Compiler.java:361)
		at org.apache.jasper.compiler.Compiler.compile(Compiler.java:339)
		at org.apache.jasper.compiler.Compiler.compile(Compiler.java:325)
		at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:368)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:350)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:301)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:610)
		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:392)
		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:321)
		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:266)
		at com.keystore.servlet.ProfileServlet.doGet(ProfileServlet.java:45)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
		at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.EncodingFilter.doFilter(EncodingFilter.java:30)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at com.keystore.filter.AuthFilter.doFilter(AuthFilter.java:45)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:654)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1474)
